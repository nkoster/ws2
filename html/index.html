<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<script src="webcomponentsjs/webcomponents.min.js"></script>
<link rel="import" href="polymer/polymer.html">
<link rel="import" href="elements/proto-element.html">
<script src="/assets/app.js"></script>
<title>websocket</title>
<body>
<proto-element url="%%WS%%" protocol="echo-protocol"></proto-element>
<script>
var wsElement = document.querySelector("proto-element");
wsElement.addEventListener('onerror', function(error) {
  throw new Error(error);
});
wsElement.addEventListener('onopen', function() {
  wsElement.send('Hello from client');
});
wsElement.addEventListener('onmessage', function(message) {
  // hello from the server
  console.log('Message: ' + message.detail);
});
</script>
</body>
</html>
